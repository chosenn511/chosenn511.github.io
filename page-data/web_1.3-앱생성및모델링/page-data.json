{"componentChunkName":"component---src-templates-post-tsx","path":"/web_1.3-앱생성및모델링/","result":{"data":{"markdownRemark":{"html":"<p>이번 포스트는 'Wordy Gallery' 프로젝트 전반의 앱 구성과 데이터베이스 모델링 설계를 바탕으로 작성하였다.</p>\n<br>\n<h2 id=\"database-erd\" style=\"position:relative;\"><a href=\"#database-erd\" aria-label=\"database erd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database ERD</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/03948cc57a1e53f2494e978e29f5bc95/5d942/WordyGalleryERD.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACeUlEQVQoz2PIjm6QiAzKV2hPncs7KWsFd1faAp5phau4////z1AW1ccbH1oqC5RXzI5qFJ2Zu4FrctZKnocrXjEWxLWKxoWUyMSGFMs2p8zk68tYwj0tew0PQ2lCt4Sfb7JcZ/oC3tDALFlf72SRhQ0b+OZMXMDXmDdRMjKwQD44IEMGaKCEh0+sQnnkRP4lk1dxt+ZPE48IyFMICkiXBVqq4O2TILa0aA83w4ykLWxWbv5C2VFNXE6e4cLipjrs+xuuskzvmyPcVzyPN8gvk8/OI5grO6qBR8fOUSw7sUZwZt88/j0NF9lCA7IFgXo4wwNzJOSsjLn2115jZehIWsgDtFmsMqGf198vRdzeLZR7dc1+9mm9s4Vm5K/ljg8pFfH0iZNMDq8Ut3YNkCxKahVe27WTdV7eNo7o4AJBoBx3dHChuLqtDeem8pNsDAuzdnPmx7QKHKq7yQ70llBJbDffkood7FOmTuXb03SBtTFpBl96RI0w0EKBlPAq4ZzIJr7HBf8ZVpbsZw/0Txdx9ozgDA3MltR1cBSan7+VnSE7vEkyLaJaPjGsXGli1gq+Obmbeafnr+GdP2c+X03aBKGksAqFhLAyRRBdHt8rsqJ4P3dL6izmdaVHOSOD8qR8fZNEIoPzFazdAmRBkcqQGFIu4OYdLQMMeClXr2hJQ0c3oYn5S7lmT1gg2Fo8RcTHO0nayTMMJC9v4uwhsbBgB/uEzOXMCwu2sxfFdggCHSKcGVkvGhNcKDw1ezUnQ1VKn0hlXD/f1Jw1PGkRNSLAJCJeGt/Fv2TuEs6+yjmCJdHdgjnRjQKlcd3CwCQiNDtvE+e07LWMDDgAAEYG3Yvzdd7zAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WordyGalleryERD\"\n        title=\"WordyGalleryERD\"\n        src=\"/static/03948cc57a1e53f2494e978e29f5bc95/fcda8/WordyGalleryERD.png\"\n        srcset=\"/static/03948cc57a1e53f2494e978e29f5bc95/12f09/WordyGalleryERD.png 148w,\n/static/03948cc57a1e53f2494e978e29f5bc95/e4a3f/WordyGalleryERD.png 295w,\n/static/03948cc57a1e53f2494e978e29f5bc95/fcda8/WordyGalleryERD.png 590w,\n/static/03948cc57a1e53f2494e978e29f5bc95/efc66/WordyGalleryERD.png 885w,\n/static/03948cc57a1e53f2494e978e29f5bc95/c83ae/WordyGalleryERD.png 1180w,\n/static/03948cc57a1e53f2494e978e29f5bc95/5d942/WordyGalleryERD.png 1343w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><code class=\"language-text\">MyUser</code> : 사용자 정보를 저장</li>\n<li><code class=\"language-text\">Art</code> :  작품과 그 상세 정보를 저장</li>\n<li><code class=\"language-text\">Genre</code> : 작품별 장르 정보를 저장</li>\n<li><code class=\"language-text\">Motif</code> : 사용자가 생성한 '댓글의 주제'를 저장</li>\n<li><code class=\"language-text\">Comment</code> : 사용자가 입력한 댓글 정보를 저장</li>\n</ul>\n<br>\n<h2 id=\"장고-orm을-사용한-모델링\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EA%B3%A0-orm%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%AA%A8%EB%8D%B8%EB%A7%81\" aria-label=\"장고 orm을 사용한 모델링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장고 ORM을 사용한 모델링</h2>\n<p>설계시 중요하다고 생각했던 사항들을 정리하였다. 관련 코드는 <a href=\"https://github.com/Monaegi/Julia-WordyGallery\" target=\"_blank\">Github 링크</a>을 참조하기 바란다.</p>\n<p><strong>(1) MyUser</strong></p>\n<p>제일 먼저 유저모델은 <code class=\"language-text\">AbstractBaseUser</code>를 상속받아 커스텀으로 정의하였다. 이렇게 만들어 줄 경우에는 <code class=\"language-text\">MyUserManager</code>로 사용자 및 관리자를 생성하는 유저매니저 또한 새로 정의해주어야 한다.</p>\n<p>사용자가 회원가입을 할 때 장고의 기본 회원가입을 사용하거나 페이스북 정보를 받아와 해당 DB에 저장하는 방식으로 나뉠 예정이다. 따라서 <code class=\"language-text\">user_type</code> 필드를 정의하고 <code class=\"language-text\">USER_TYPE_CHOICES</code>에 각각 장고, 페이스북 로그인 사용자로 분류하여 저장될 때 어떤 사용자인지 표시하도록 하였다.</p>\n<p>장고 어드민 페이지를 사용할 경우에는 반드시 <code class=\"language-text\">get_full_name</code>과 <code class=\"language-text\">get_short_name</code>을 <code class=\"language-text\">MyUser</code>내에 정의해주어야 한다. 장고 어드민페이지 로그인 시 앞서 언급한 두 메서드를 사용하여 로그인 사용자의 이름을 렌더하기 때문이다.</p>\n<p>마지막으로, 사용자 로그인 시 필요한 토큰 생성 메서드를 정의해주었다. 본 프로젝트에서 사용자 로그인은 장고의 <code class=\"language-text\">REST FRAMEWORK</code> 내 <code class=\"language-text\">토큰 기반 인증</code>을 사용할 것이므로 <a href=\"http://www.django-rest-framework.org/api-guide/authentication/\" target=\"_blank\">REST-Authentication 관련 문서</a>를 참고하여 해당 메서드를 정의해주었다.</p>\n<br>\n<p><strong>(2) Art</strong></p>\n<p>페이지에 표시할 작품정보를 저장할 수 있도록 설계하였다.</p>\n<br>\n<p><strong>(3) Genre</strong></p>\n<p>하나의 작품은 여러 개의 장르에 속할 수 있고 장르 또한 여러 개의 작품과 연결될 수 있다. 따라서 <code class=\"language-text\">Art</code>모델과 <code class=\"language-text\">다대다 관계(ManyToManyField)</code>로 정의해준다. 이 때 필드명에 <code class=\"language-text\">related_name</code>을 따로 정의하여 연결된 필드와 이름이 겹치지 않도록 하는 것이 좋다.</p>\n<p>장르를 세분화하고 장르에 따라 분류된 작품들의 목록을 출력하려면 따로 작품에 하나의 <code class=\"language-text\">column</code>으로 저장하기 보다는 따로 모델을 정의해주는 것이 좋다.</p>\n<br>\n<p><strong>(4) Motif</strong></p>\n<p><code class=\"language-text\">motif</code>는 예술계에서 주제, 소재를 의미하는 단어로 쓰인다. 사용자가 작품을 보고 이야기하고 싶은 주제가 있을 경우 모티프를 생성하여 해당 주제와 관련된 의견을 댓글로 작성할 수 있도록 설계하였다. <code class=\"language-text\">Motif</code> 모델에는 작품별로 생성된 주제의 연결관계를 저장할 수 있도록 설계하였다.</p>\n<br>\n<p><strong>(5) Comment</strong></p>\n<p>사용자가 작성하는 의견, 즉 댓글은 모두 <code class=\"language-text\">Comment</code> 모델에 저장된다. 댓글은 주제별로 분류되어야 하므로 관련 <code class=\"language-text\">Motif</code>를 <code class=\"language-text\">다대일 관계</code>로 가진다. 이외 댓글을 작성할 때 필요한 작성자, 작성일 등의 정보를 저장한다.</p>\n<br>\n<h2 id=\"uri-설계\" style=\"position:relative;\"><a href=\"#uri-%EC%84%A4%EA%B3%84\" aria-label=\"uri 설계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>URI 설계</h2>\n<table>\n<thead>\n<tr>\n<th align=\"center\">분류</th>\n<th align=\"center\">기능</th>\n<th align=\"center\">URI</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">인증페이지</td>\n<td align=\"center\">로그인</td>\n<td align=\"center\"><code class=\"language-text\">^member/login$</code></td>\n</tr>\n<tr>\n<td align=\"center\">인증페이지</td>\n<td align=\"center\">페이스북 로그인</td>\n<td align=\"center\"><code class=\"language-text\">^member/login-facebook$</code></td>\n</tr>\n<tr>\n<td align=\"center\">인증페이지</td>\n<td align=\"center\">회원가입</td>\n<td align=\"center\"><code class=\"language-text\">^member/signup$</code></td>\n</tr>\n<tr>\n<td align=\"center\">인증페이지</td>\n<td align=\"center\">로그아웃</td>\n<td align=\"center\"><code class=\"language-text\">^member/logout$</code></td>\n</tr>\n<tr>\n<td align=\"center\">인증페이지</td>\n<td align=\"center\">사용자 프로필</td>\n<td align=\"center\"><code class=\"language-text\">^member/profile/&lt;user-id&gt;$</code></td>\n</tr>\n<tr>\n<td align=\"center\">인증페이지</td>\n<td align=\"center\">사용자 정보수정</td>\n<td align=\"center\"><code class=\"language-text\">^member/profile/&lt;user-id&gt;/edit$</code></td>\n</tr>\n<tr>\n<td align=\"center\">인증페이지</td>\n<td align=\"center\">사용자 탈퇴</td>\n<td align=\"center\"><code class=\"language-text\">^member/profile/&lt;user-id&gt;/edit$</code></td>\n</tr>\n<tr>\n<td align=\"center\">기능페이지</td>\n<td align=\"center\">작품 목록</td>\n<td align=\"center\"><code class=\"language-text\">^art/gallery$</code></td>\n</tr>\n<tr>\n<td align=\"center\">기능페이지</td>\n<td align=\"center\">작품 세부</td>\n<td align=\"center\"><code class=\"language-text\">^art/&lt;art-id&gt;$</code></td>\n</tr>\n<tr>\n<td align=\"center\">기능페이지</td>\n<td align=\"center\">장르 목록</td>\n<td align=\"center\"><code class=\"language-text\">^art/genre/list$</code></td>\n</tr>\n<tr>\n<td align=\"center\">기능페이지</td>\n<td align=\"center\">장르별 작품 목록</td>\n<td align=\"center\"><code class=\"language-text\">^art/genre/&lt;genre-id&gt;/list$</code></td>\n</tr>\n</tbody>\n</table>\n<br>\n<hr>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h2>\n<p>다음 포스트는 REST 프레임워크를 사용한 인증 관련 API에 대해 설명할 것이다.</p>\n<br>","excerpt":"이번 포스트는 'Wordy Gallery' 프로젝트 전반의 앱 구성과 데이터베이스 모델링 설계를 바탕으로 작성하였다. Database ERD   : 사용자 정보를 저장  :  작품과 그 상세 정보를 저장  : 작품별 장르 정보를 저장  : 사용자가 …","tableOfContents":"<ul>\n<li><a href=\"/web_1.3-%EC%95%B1%EC%83%9D%EC%84%B1%EB%B0%8F%EB%AA%A8%EB%8D%B8%EB%A7%81/#database-erd\">Database ERD</a></li>\n<li><a href=\"/web_1.3-%EC%95%B1%EC%83%9D%EC%84%B1%EB%B0%8F%EB%AA%A8%EB%8D%B8%EB%A7%81/#%EC%9E%A5%EA%B3%A0-orm%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%AA%A8%EB%8D%B8%EB%A7%81\">장고 ORM을 사용한 모델링</a></li>\n<li><a href=\"/web_1.3-%EC%95%B1%EC%83%9D%EC%84%B1%EB%B0%8F%EB%AA%A8%EB%8D%B8%EB%A7%81/#uri-%EC%84%A4%EA%B3%84\">URI 설계</a></li>\n<li><a href=\"/web_1.3-%EC%95%B1%EC%83%9D%EC%84%B1%EB%B0%8F%EB%AA%A8%EB%8D%B8%EB%A7%81/#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n</ul>","fields":{"slug":"/web_1.3-앱생성및모델링/"},"frontmatter":{"title":"Web _ 1.3 앱 생성 및 모델링","date":"Sep 16, 2017","tags":["Django","Project","Web development"],"keywords":["Development Note","Julia"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/web_1.3-앱생성및모델링/","series":[],"lastmod":"2017-09-16"}},"staticQueryHashes":["2027115977","694178885"]}